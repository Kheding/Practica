<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Editar Empleado - Staff</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>

<body class="bg-light">
    <div class="container mt-5">
        <h2 class="text-center mb-4">✏️ Editar Empleado del Staff</h2>

        <form id="editarEmpleadoForm" method="POST" class="row g-3 bg-white p-4 rounded shadow-sm">
            <div class="col-md-6">
                <label class="form-label">Nombre completo</label>
                <input type="text" name="nombre_completo" id="nombre_completo" class="form-control" required>
            </div>
            <div class="col-md-3">
                <label class="form-label">RUT</label>
                <input type="text" name="rut" id="rut" class="form-control" required>
            </div>
            <div class="col-md-3">
                <label class="form-label">Sede</label>
                <select name="sede" id="sede" class="form-select" required>
                    <option value="">Seleccione una sede</option>
                    <option value="NOGALES">NOGALES</option>
                    <option value="COLON">COLON</option>
                    <option value="EL BOSQUE">EL BOSQUE</option>
                    <option value="LA CISTERNA">LA CISTERNA</option>
                    <option value="BUIN">BUIN</option>
                </select>
            </div>
            <div class="col-md-6">
                <label class="form-label">Correo Personal</label>
                <input type="email" name="email_personal" id="email_personal" class="form-control">
            </div>
            <div class="col-md-6">
                <label class="form-label">Dirección</label>
                <input type="text" name="direccion" id="direccion" class="form-control">
            </div>
            <div class="col-md-4">
                <label class="form-label">Teléfono de contacto</label>
                <input type="text" name="fono_contacto" id="fono_contacto" class="form-control">
            </div>
            <div class="col-md-4">
                <label class="form-label">Contacto de emergencia</label>
                <input type="text" name="contacto_emergencia" id="contacto_emergencia" class="form-control">
            </div>
            <div class="col-md-2">
                <label class="form-label">Relación</label>
                <select name="relacion" id="relacion" class="form-select">
                    <option value="">Seleccione</option>
                    <option value="Esposa/o">Esposa/o</option>
                    <option value="Padre/Madre">Padre/Madre</option>
                    <option value="Hermano/a">Hermano/a</option>
                    <option value="Pareja">Pareja</option>
                    <option value="Amigo/a">Amigo/a</option>
                    <option value="Hijo/a">Hijo/a</option>
                </select>
            </div>
            <div class="col-md-2">
                <label class="form-label">Fono emergencia</label>
                <input type="text" name="fono_emergencia" id="fono_emergencia" class="form-control">
            </div>
            <div class="col-md-6">
                <label class="form-label">Enfermedades</label>
                <input type="text" name="enfermedades" id="enfermedades" class="form-control">
            </div>
            <div class="col-md-6">
                <label class="form-label">Alergias</label>
                <input type="text" name="alergias" id="alergias" class="form-control">
            </div>

            <div class="text-center mt-4">
                <button type="submit" class="btn btn-primary px-4">Actualizar</button>
                <a href="/rrhh/empleados" class="btn btn-secondary px-4">Cancelar</a>
            </div>
        </form>
    </div>

    <script>
        // Este script espera que tu servidor entregue el objeto "empleado" en la vista con una variable global:
        const empleado = JSON.parse(localStorage.getItem('empleadoEditar') || '{}');

        if (empleado && empleado.id) {
            document.getElementById('editarEmpleadoForm').action = `/rrhh/editarEmpleado/${empleado.id}`;
            document.getElementById('nombre_completo').value = empleado.nombre_completo || '';
            document.getElementById('rut').value = empleado.rut || '';
            document.getElementById('sede').value = empleado.sede || '';
            document.getElementById('email_personal').value = empleado.email_personal || '';
            document.getElementById('direccion').value = empleado.direccion || '';
            document.getElementById('fono_contacto').value = empleado.fono_contacto || '';
            document.getElementById('contacto_emergencia').value = empleado.contacto_emergencia || '';
            document.getElementById('relacion').value = empleado.relacion || '';
            document.getElementById('fono_emergencia').value = empleado.fono_emergencia || '';
            document.getElementById('enfermedades').value = empleado.enfermedades || '';
            document.getElementById('alergias').value = empleado.alergias || '';
        } else {
            alert('Error al cargar los datos del empleado. Asegúrate de seleccionarlo correctamente.');
        }
    </script>
</body>

</html>