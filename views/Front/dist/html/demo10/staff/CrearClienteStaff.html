<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Crear Cliente - Staff</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="container py-4">
    <h2 class="mb-4">Crear Nuevo Cliente</h2>

    <form action="/staff/crearCliente" method="POST">

        <div class="row g-3">
            <div class="col-md-6">
                <label>Nombre</label>
                <input type="text" class="form-control" name="Nombre" required>
            </div>
            <div class="col-md-6">
                <label>Segundo Nombre</label>
                <input type="text" class="form-control" name="SegundoNombre">
            </div>
            <div class="col-md-6">
                <label>Apellido</label>
                <input type="text" class="form-control" name="Apellido" required>
            </div>
            <div class="col-md-6">
                <label>Segundo Apellido</label>
                <input type="text" class="form-control" name="SegundoApellido">
            </div>
            <div class="col-md-6">
                <label>Plan Contratado</label>
                <input type="text" class="form-control" name="PlanC" required>
            </div>
            <div class="col-md-6">
                <label>Fecha de Registro</label>
                <input type="date" class="form-control" name="FechaRegistro" required>
            </div>
            <div class="col-md-6">
                <label>Conversión</label>
                <input type="date" class="form-control" name="Conversion">
            </div>
            <div class="col-md-6">
                <label>Vencimiento Plan</label>
                <input type="date" class="form-control" name="VencimientoPlan">
            </div>
            <div class="col-md-6">
                <label>Sede</label>
                <select name="Sede" class="form-select" required>
                    <option value="">Seleccione una sede</option>
                    <option value="NOGALES">NOGALES</option>
                    <option value="COLON">COLON</option>
                    <option value="EL BOSQUE">EL BOSQUE</option>
                    <option value="LA CISTERNA">LA CISTERNA</option>
                    <option value="BUIN">BUIN</option>
                </select>
            </div>
            <div class="col-md-6">
                <label>Plan Firmado</label>
                <select name="PlanFirmado" class="form-select" required>
                    <option value="">Seleccione una opción</option>
                    <option value="SI">SI</option>
                    <option value="NO">NO</option>
                </select>
            </div>
            <div class="col-md-6">
                <label>RUT</label>
                <input type="text" class="form-control" name="RUT">
            </div>
            <div class="col-md-6">
                <label>Fecha de Nacimiento</label>
                <input type="date" class="form-control" name="FechaNacimiento">
            </div>
            <div class="col-md-6">
                <label>Correo Electrónico</label>
                <input type="email" class="form-control" name="CorreoElectronico">
            </div>
            <div class="col-md-6">
                <label>Género</label>
                <select class="form-select" name="Genero">
                    <option value="">Seleccionar</option>
                    <option value="Masculino">Masculino</option>
                    <option value="Femenino">Femenino</option>
                    <option value="Otro">Otro</option>
                </select>
            </div>
            <div class="col-md-6">
                <label>Edad</label>
                <input type="number" class="form-control" name="Edad">
            </div>
            <div class="col-md-6">
                <label>Teléfono Móvil</label>
                <input type="text" class="form-control" name="TelefonoMovil">
            </div>
            <div class="col-md-6">
                <label>Última Presencia</label>
                <input type="date" class="form-control" name="UltimaPresencia">
            </div>
            <div class="col-md-6">
                <label>Valor del Plan</label>
                <input type="number" step="0.01" class="form-control" name="ValorPlan">
            </div>
            <input type="hidden" name="DiasActivos" id="DiasActivos" />
        </div>

        <div class="mt-4 d-flex justify-content-between">
            <a href="/staff/dashboard" class="btn btn-secondary">Volver al Dashboard</a>
            <button type="submit" class="btn btn-primary">Crear Cliente</button>
        </div>
    </form>

    <script>
        const fechaInput = document.querySelector('input[name="FechaRegistro"]');
        const diasActivosInput = document.getElementById('DiasActivos');

        function calcularDiasActivos() {
            const fechaRegistro = new Date(fechaInput.value);
            const hoy = new Date();

            if (!isNaN(fechaRegistro)) {
                const diferenciaMs = hoy - fechaRegistro;
                const dias = Math.floor(diferenciaMs / (1000 * 60 * 60 * 24));
                diasActivosInput.value = dias >= 0 ? dias : 0;
            } else {
                diasActivosInput.value = '';
            }
        }

        fechaInput.addEventListener('change', calcularDiasActivos);
        if (fechaInput.value) calcularDiasActivos();
    </script>
</body>

</html>